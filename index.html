<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>è¡—ã¨åˆ†è§£è€…ãƒ—ãƒ©ãƒ³ã‚¿ãƒ¼ï¼šé€²åŒ–ç‰ˆ</title>
<style>
body {
  margin:0; font-family:sans-serif; background:#0b1d3a; color:#eef; text-align:center;
}
h1 { margin:16px 0; }
#grid {
  display:grid;
  grid-template-columns: repeat(10, 50px);
  grid-template-rows: repeat(10, 50px);
  gap:2px;
  margin:20px auto;
}
.tile {
  width:50px; height:50px;
  background:#3aaed8; border-radius:6px; cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  font-size:20px; transition:0.3s;
}
.tile.green{background:#28a745;color:#fff;}   /* å…¬åœ’ */
.tile.road{background:#6c757d;color:#fff;}    /* é“è·¯ */
.tile.factory{background:#ff6b6b;color:#fff;} /* å·¥å ´ */
.tile.house{background:#f1c40f;color:#000;}   /* å»ºç‰© */

.soil {
  margin:20px auto; width:520px; height:120px;
  background:#3b2a1a; border-radius:12px; position:relative; overflow:hidden;
}
.line {
  position:absolute; width:2px; height:60px;
  background:rgba(0,255,180,0.8); animation:pulse 2s infinite;
}
.dead { background: rgba(120,120,120,0.3); animation:none; }
.garbage {
  position:absolute; width:12px; height:12px; border-radius:50%;
  background:#888; transition: top 1s linear, left 1s linear;
}
@keyframes pulse { 0%{opacity:0.2}50%{opacity:1}100%{opacity:0.2} }
</style>
</head>
<body>

<h1>è¡—ã¨åˆ†è§£è€…ãƒ—ãƒ©ãƒ³ã‚¿ãƒ¼ï¼šé€²åŒ–ç‰ˆ</h1>

<div id="grid"></div>

<div class="soil" id="soil">
  <p id="soilStatus">åˆ†è§£è€…ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯: æ´»ç™º</p>
</div>

<p>ã‚¯ãƒªãƒƒã‚¯ã§ã‚¿ã‚¤ãƒ«åˆ‡ã‚Šæ›¿ãˆã€è¡—ã‚’ä½œã‚ã†</p>
<p>ã‚¿ã‚¤ãƒ«: ğŸŒ³=å…¬åœ’, ğŸ =å»ºç‰©, ğŸ›£=é“è·¯, ğŸ­=å·¥å ´, é’=ç©ºã</p>

<script>
const gridSize=10;
const grid=document.getElementById("grid");
const soil=document.getElementById("soil");
const soilStatus=document.getElementById("soilStatus");
let health=100;
const tileIcons={green:'ğŸŒ³',house:'ğŸ ',road:'ğŸ›£',factory:'ğŸ­',empty:''};
const typeOrder=["green","house","road","factory","empty"];

// åˆæœŸåŒ–
for(let i=0;i<gridSize*gridSize;i++){
  const tile=document.createElement("div");
  tile.className="tile"; tile.dataset.type="empty";
  tile.addEventListener("click",()=>{placeTile(tile)});
  grid.appendChild(tile);
}

// ã‚¿ã‚¤ãƒ«æ“ä½œ
function placeTile(tile){
  let nextType=typeOrder[(typeOrder.indexOf(tile.dataset.type)+1)%typeOrder.length];
  tile.dataset.type=nextType;
  tile.className="tile "+(nextType!=="empty"?nextType:"");
  tile.textContent=tileIcons[nextType];

  // å¥åº·å¤‰åŒ–
  if(nextType==="green") health+=5;
  if(nextType==="house") health+=2;
  if(nextType==="road") health-=2;
  if(nextType==="factory") health-=5;
  health=Math.min(100,Math.max(0,health));

  // ã‚´ãƒŸç™ºç”Ÿ
  if(nextType==="factory") createGarbage(tile);

  updateSoil();
}

// åœŸå£Œæ›´æ–°
function updateSoil(){
  soilStatus.textContent="åˆ†è§£è€…ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯: "+(health>70?"æ´»ç™º":health>40?"ä¸å®‰å®š":"æ–­è£‚ä¸­");
  document.querySelectorAll(".line").forEach(l=>l.remove());
  const lines=Math.max(1,Math.floor(health/15));
  for(let i=0;i<lines;i++){
    const l=document.createElement("div");
    l.className="line"+(health<40?" dead":"");
    l.style.left=Math.random()*100+"%";
    l.style.top=Math.random()*40+"px";
    soil.appendChild(l);
  }
}

// ã‚´ãƒŸç”Ÿæˆãƒ»è½ä¸‹ãƒ»åˆ†è§£
function createGarbage(tile){
  const rect=tile.getBoundingClientRect();
  const soilRect=soil.getBoundingClientRect();
  const garbage=document.createElement("div");
  garbage.className="garbage";
  garbage.style.left=(tile.offsetLeft+20)+"px";
  garbage.style.top=(tile.offsetTop+10)+"px";
  document.body.appendChild(garbage);

  // è½ä¸‹
  setTimeout(()=>{
    garbage.style.top=(soilRect.top + Math.random()*80)+"px";
  },50);

  // åˆ†è§£å‡¦ç†
  setTimeout(()=>{
    garbage.remove();
    health=Math.min(100,health+3);
    updateSoil();
  },1200);
}

updateSoil();
</script>

</body>
</html>
