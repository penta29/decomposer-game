<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>Planet Planter â€“ Decomposer Edition</title>
<script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
<style>
body {
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  background: #e6eef2;
}
#ui {
  position: absolute;
  right: 0;
  top: 0;
  width: 360px;
  height: 100%;
  background: #ffffff;
  border-left: 2px solid #ccc;
  overflow-y: auto;
  padding: 12px;
  box-sizing: border-box;
}
.seed-btn {
  display: inline-block;
  padding: 6px 10px;
  margin: 4px;
  border-radius: 6px;
  cursor: pointer;
  color: #fff;
  font-weight: bold;
}
</style>
</head>

<body>
<div id="ui"></div>

<script>
let grid = [];
let cols = 8;
let rows = 7;
let hexSize = 32;

let currentSeed = "red";

const seedInfo = {
  red:  { name:"ä½å®…", color:"#e74c3c" },
  green:{ name:"ç·‘åœ°", color:"#2ecc71" },
  yellow:{ name:"å·¥å ´", color:"#f1c40f" },
  blue:{ name:"å•†æ¥­", color:"#3498db" }
};

let counts = { red:0, green:0, yellow:0, blue:0 };

function setup(){
  createCanvas(window.innerWidth-360, window.innerHeight);
  initGrid();
  buildUI();
}

function draw(){
  background(220,230,235);
  drawGrid();
}

function initGrid(){
  grid=[];
  for(let y=0;y<rows;y++){
    for(let x=0;x<cols;x++){
      grid.push({
        x,y,
        seed:null
      });
    }
  }
}

function drawGrid(){
  translate(80,80);
  for(let cell of grid){
    let px = cell.x * hexSize * 1.5;
    let py = cell.y * hexSize * 1.732 + (cell.x%2)*hexSize*0.866;
    drawHex(px,py,hexSize,cell.seed);
  }
}

function drawHex(x,y,r,seed){
  push();
  translate(x,y);
  stroke(120);
  strokeWeight(1);
  fill(seed ? seedInfo[seed].color : "#ddd");
  beginShape();
  for(let a=0;a<6;a++){
    let ang = PI/3*a;
    vertex(cos(ang)*r,sin(ang)*r);
  }
  endShape(CLOSE);
  pop();
}

function mousePressed(){
  translate(80,80);
  for(let cell of grid){
    let px = cell.x * hexSize * 1.5;
    let py = cell.y * hexSize * 1.732 + (cell.x%2)*hexSize*0.866;
    if(dist(mouseX-80,mouseY-80,px,py)<hexSize){
      if(cell.seed){
        counts[cell.seed]--;
      }
      cell.seed=currentSeed;
      counts[currentSeed]++;
      buildUI();
      break;
    }
  }
}

function buildUI(){
  const ui=document.getElementById("ui");
  ui.innerHTML=`
<h2>ğŸŒ± ãƒŸãƒ©ã‚¤ã®ã‚¿ãƒ</h2>

<div>
${Object.keys(seedInfo).map(k=>`
<span class="seed-btn" style="background:${seedInfo[k].color}"
 onclick="selectSeed('${k}')">
${seedInfo[k].name}
</span>`).join("")}
</div>

<hr>

<h3>ğŸ“Š éƒ½å¸‚çŠ¶æ³</h3>
ä½å®…:${counts.red}<br>
ç·‘åœ°:${counts.green}<br>
å·¥å ´:${counts.yellow}<br>
å•†æ¥­:${counts.blue}

<hr>

<h3>ğŸ¤ åˆã‚ã›æŠ€ï¼ˆå…¨ä½“ãƒ«ãƒ¼ãƒ«ï¼‰</h3>
ğŸ”´Ã—ğŸŸ¢Ã—2 â†’ å…¬åœ’<br>
ğŸ”´Ã—ğŸ”µÃ—3 â†’ è¤‡åˆå•†æ¥­æ–½è¨­<br>
ğŸŸ¡Ã—ğŸ”µÃ—2 â†’ æµé€šæ‹ ç‚¹<br>
ğŸŸ¡Ã—ğŸŸ¢Ã—3 â†’ ç’°å¢ƒå¯¾å¿œå·¥å ´<br>

<hr>

<h3>â¬† ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—</h3>
ğŸŸ¢Ã—5 â†’ éƒ½å¸‚å…¬åœ’<br>
ğŸŸ¢Ã—10 â†’ éŠæ°´æ± å…¬åœ’<br>
ğŸ”´Ã—10 â†’ é«˜å¯†åº¦ä½å®…<br>
ğŸŸ¡Ã—12 â†’ å…¬å®³éƒ½å¸‚ï¼ˆå¤±æ•—ï¼‰<br>

<hr>

<h3>âš  ãƒˆãƒ©ãƒ–ãƒ«æ¡ä»¶</h3>
ğŸ¦  ç–«ç—…ï¼šä½å®…80ä»¥ä¸Šï¼‹ç—…é™¢ãªã—<br>
ğŸ­ å…¬å®³ï¼šå·¥å ´ï¼ç·‘åœ°Ã—2<br>
ğŸŒ¾ å‡¶ä½œï¼šç·‘åœ°æ¸›å°‘5ã‚¿ãƒ¼ãƒ³<br>
ğŸŒ‹ ç½å®³ï¼šåŠãƒ©ãƒ³ãƒ€ãƒ ï¼ˆç·‘å°‘ã§â†‘ï¼‰
`;
}

window.selectSeed = function(k){
  currentSeed = k;
};
</script>
</body>
</html>
